// ==UserScript==
// @name         cicc-hrld
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Ê≤πÁå¥ËÑöÊú¨
// @author       You
// @match        *://*/*
// @run-at       document-end
// ==/UserScript==
(()=>{var e={172(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},373(e){e.exports=function(e){var t=Object(e),o=[];for(var n in t)o.unshift(n);return function e(){for(;o.length;)if((n=o.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},546(e){function t(o,n,r,c){var i=Object.defineProperty;try{i({},"",{})}catch(o){i=0}e.exports=t=function(e,o,n,r){function c(o,n){t(e,o,function(e){return this._invoke(o,n,e)})}o?i?i(e,o,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[o]=n:(c("next",0),c("throw",1),c("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(o,n,r,c)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579(e,t,o){var n=o(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],o=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},633(e,t,o){var n=o(172),r=o(993),c=o(869),i=o(887),u=o(791),l=o(373),a=o(579);function s(){"use strict";var t=r(),o=t.m(s),f=(Object.getPrototypeOf?Object.getPrototypeOf(o):o.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,o;return function(n){t||(t={stop:function(){return o(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return o(n.a,d[e],t)},delegateYield:function(e,r,c){return t.resultName=r,o(n.d,a(e),c)},finish:function(e){return o(n.f,e)}},o=function(e,o,r){n.p=t.prev,n.n=t.next;try{return e(o,r)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=s=function(){return{wrap:function(e,o,n,r){return t.w(v(e),o,n,r&&r.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:u,async:function(e,t,o,n,r){return(p(t)?i:c)(v(e),t,o,n,r)},keys:l,values:a}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},738(e){function t(o){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(o)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756(e,t,o){var n=o(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791(e,t,o){var n=o(172),r=o(546);e.exports=function e(t,o){function c(e,r,i,u){try{var l=t[e](r),a=l.value;return a instanceof n?o.resolve(a.v).then(function(e){c("next",e,i,u)},function(e){c("throw",e,i,u)}):o.resolve(a).then(function(e){l.value=e,i(l)},function(e){return c("throw",e,i,u)})}catch(e){u(e)}}var i;this.next||(r(e.prototype),r(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(e,t,n){function r(){return new o(function(t,o){c(e,n,t,o)})}return i=i?i.then(r,r):r()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869(e,t,o){var n=o(887);e.exports=function(e,t,o,r,c){var i=n(e,t,o,r,c);return i.next().then(function(e){return e.done?e.value:i.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},887(e,t,o){var n=o(993),r=o(791);e.exports=function(e,t,o,c,i){return new r(n().w(e,t,o,c),i||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},993(e,t,o){var n=o(546);function r(){var t,o,c="function"==typeof Symbol?Symbol:{},i=c.iterator||"@@iterator",u=c.toStringTag||"@@toStringTag";function l(e,r,c,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return n(l,"_invoke",function(e,n,r){var c,i,u,l=0,s=r||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,o){return c=e,i=0,u=t,p.n=o,a}};function d(e,n){for(i=e,u=n,o=0;!f&&l&&!r&&o<s.length;o++){var r,c=s[o],d=p.p,v=c[2];e>3?(r=v===n)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=d&&((r=e<2&&d<c[1])?(i=0,p.v=n,p.n=c[1]):d<v&&(r=e<3||c[0]>n||n>v)&&(c[4]=e,c[5]=n,p.n=v,i=0))}if(r||e>1)return a;throw f=!0,n}return function(r,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),i=s,u=v;(o=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(p.n=-1),d(i,u)):p.n=u:p.v=u);try{if(l=2,c){if(i||(r="next"),o=c[r]){if(!(o=o.call(c,u)))throw TypeError("iterator result is not an object");if(!o.done)return o;u=o.value,i<2&&(i=0)}else 1===i&&(o=c.return)&&o.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),i=1);c=t}else if((o=(f=p.n<0)?u:e.call(n,p))!==a)break}catch(e){c=t,i=1,u=e}finally{l=1}}return{value:o,done:f}}}(e,c,i),!0),l}var a={};function s(){}function f(){}function p(){}o=Object.getPrototypeOf;var d=[][i]?o(o([][i]())):(n(o={},i,function(){return this}),o),v=p.prototype=s.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,u,"GeneratorFunction")),e.prototype=Object.create(v),e}return f.prototype=p,n(v,"constructor",p),n(p,"constructor",f),f.displayName="GeneratorFunction",n(p,u,"GeneratorFunction"),n(v),n(v,u,"Generator"),n(v,i,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(e.exports=r=function(){return{w:l,m:y}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,o),c.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function t(t,o){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,c,i,u=[],l=!0,a=!1;try{if(c=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(n=c.call(o)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){a=!0,r=e}finally{try{if(!l&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(a)throw r}}return u}}(t,o)||function(t,o){if(t){if("string"==typeof t)return e(t,o);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,o):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t,o,n,r,c,i){try{var u=e[c](i),l=u.value}catch(e){return void o(e)}u.done?t(l):Promise.resolve(l).then(n,r)}var r=o(756),c=o.n(r);function i(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return u(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,c=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw c}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}
// ==UserScript==
// @name         CICC HRLD ËØæÁ®ãÂä©Êâã
// @namespace    http://tampermonkey.net/
// @version      1.0.0
// @description  CICC HRLD ËØæÁ®ãÂ≠¶‰π†Âä©Êâã
// @author       You
// @match        https://hrld.cicc.com.cn/*
// @match        https://www.sacedu.cn/*
// @grant        none
// @run-at       document-start
// ==/UserScript==
!function(){function e(){return new Promise(function(e){"complete"===document.readyState?e():window.addEventListener("load",e)})}function o(){var t;return t=c().mark(function t(){var o;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("üéì CICC HRLD ËØæÁ®ãÂä©ÊâãÂ∑≤ÂêØÂä®"),t.next=1,e();case 1:o=location.href,new MutationObserver(function(){location.href!==o&&(o=location.href,r())}).observe(document.body,{childList:!0,subtree:!0}),r();case 2:case"end":return t.stop()}},t)}),o=function(){var e=this,o=arguments;return new Promise(function(r,c){var i=t.apply(e,o);function u(e){n(i,r,c,u,l,"next",e)}function l(e){n(i,r,c,u,l,"throw",e)}u(void 0)})},o.apply(this,arguments)}function r(){var e=location.href;console.log("üìç È°µÈù¢ÂèòÂåñ:",e),e.includes("/study/subject/detail/")&&(console.log("üìñ ËøõÂÖ•ËØæÁ®ãËØ¶ÊÉÖÈ°µ"),sessionStorage.setItem("courseDetailPage",location.href),console.log("‚öôÔ∏è ËÆæÁΩÆËØæÁ®ãËØ¶ÊÉÖÈ°µÂäüËÉΩ"),setTimeout(function(){!function(){console.log("üîç ÂºÄÂßãÊ£ÄÊµãÂ≠¶‰π†È°πÁõÆ...");var e=document.querySelectorAll(".catalog-state-info .item .operation i:last-child");if(e.length){console.log("üìã ÊâæÂà∞ ".concat(e.length," ‰∏™ÂèØÊìç‰ΩúÈ°πÁõÆ"));var t=0,o=0,n=0,r=null,c=null;e.forEach(function(e,i){var u=e.querySelector("div");if(u){var l=u.textContent.trim();switch(console.log("üìù item ".concat(i+1,' Êìç‰ΩúÊñáÂ≠ó: "').concat(l,'"')),l){case"ÈáçÊñ∞Â≠¶‰π†":t++,console.log("‚úÖ ÊâæÂà∞ÈáçÊñ∞Â≠¶‰π†È°πÁõÆ: item ".concat(i+1));break;case"ÁªßÁª≠Â≠¶‰π†":n++,console.log("üîÑ ÊâæÂà∞ÁªßÁª≠Â≠¶‰π†È°πÁõÆ: item ".concat(i+1)),r||(r={element:e,index:i+1});break;case"ÂºÄÂßãÂ≠¶‰π†":o++,console.log("üéØ ÊâæÂà∞ÂºÄÂßãÂ≠¶‰π†È°πÁõÆ: item ".concat(i+1)),c||(c={element:e,index:i+1})}}else console.log("‚ö†Ô∏è item ".concat(i+1," Ê≤°ÊúâÊñáÂ≠ódiv"))}),console.log("üìä ÁªüËÆ°ÁªìÊûú: ".concat(t,' ‰∏™"ÈáçÊñ∞Â≠¶‰π†", ').concat(n,' ‰∏™"ÁªßÁª≠Â≠¶‰π†", ').concat(o,' ‰∏™"ÂºÄÂßãÂ≠¶‰π†"')),r?(console.log("üñ±Ô∏è ÂáÜÂ§áÁÇπÂáªÁ¨¨‰∏Ä‰∏™ÁªßÁª≠Â≠¶‰π†È°πÁõÆ: item ".concat(r.index)),setTimeout(function(){r.element.click(),console.log("‚úÖ Â∑≤ÁÇπÂáªÁ¨¨‰∏Ä‰∏™ÁªßÁª≠Â≠¶‰π†È°πÁõÆ: item ".concat(r.index))},1e3)):c?(console.log("üñ±Ô∏è ÂáÜÂ§áÁÇπÂáªÁ¨¨‰∏Ä‰∏™ÂºÄÂßãÂ≠¶‰π†È°πÁõÆ: item ".concat(c.index)),setTimeout(function(){c.element.click(),console.log("‚úÖ Â∑≤ÁÇπÂáªÁ¨¨‰∏Ä‰∏™ÂºÄÂßãÂ≠¶‰π†È°πÁõÆ: item ".concat(c.index))},1e3)):0===o&&0===t&&0===n?console.log("üîç Ê≤°ÊúâÊâæÂà∞‰ªª‰ΩïÂ≠¶‰π†È°πÁõÆ"):console.log('üí° Âè™Êúâ"ÈáçÊñ∞Â≠¶‰π†"È°πÁõÆÔºåÊöÇ‰∏çËá™Âä®ÁÇπÂáª')}else console.log("‚ùå Êú™ÊâæÂà∞ÂèØÊìç‰ΩúÈ°πÁõÆ")}()},12e3),setTimeout(function(){s("div.page-main-wrapper")},3e3)),e.includes("/study/course/detail/")&&(console.log("üìö ËøõÂÖ•Á´†ËäÇËßÜÈ¢ëÈ°µ"),console.log("‚öôÔ∏è ËÆæÁΩÆÁ´†ËäÇËßÜÈ¢ëÈ°µÂäüËÉΩ"),setTimeout(function(){l()},1e3),setTimeout(function(){s("div.viewport#content")},3e3))}function u(e){var t=e.querySelectorAll(".chapter-right .section-item");if(0===t.length)return null;var o=t[0].querySelectorAll(".item");if(0===o.length)return null;var n=o[o.length-1],r=n.querySelector("span");return r?{status:r.textContent.trim(),element:n}:null}function l(){console.log("üîç ÂºÄÂßãÊ£ÄÊµãÁ´†ËäÇÂàóË°®...");var e=document.querySelectorAll(".chapter-list .tabs-cont-item .section-arrow .chapter-list-box");if(e.length){var o,n=i(e.entries());try{var r,c=function(){var e=t(o.value,2),n=e[0],r=u(e[1]);return r?(console.log("üìñ Á´†ËäÇ ".concat(n+1,' Áä∂ÊÄÅ: "').concat(r.status,'"')),"Â≠¶‰π†‰∏≠"===r.status||"Êú™ÂºÄÂßã"===r.status?(console.log("üñ±Ô∏è ÁÇπÂáªÁ´†ËäÇ ".concat(n+1,"...")),setTimeout(function(){r.element.click(),setTimeout(function(){document.querySelector("video").dataset.simulateClick="true",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".register-mask-layer .register-img",t=document.querySelector(e);if(!t)return;try{t.click(),console.log("‚úÖ Â∑≤ÁÇπÂáª.register-mask-layer .register-img")}catch(e){console.warn("‚ö†Ô∏è ÁÇπÂáª.register-mask-layer .register-imgÂ§±Ë¥•:",e)}}(".register-mask-layer .register-img"),function(){console.log("üîç Ê£ÄÊü•ËßÜÈ¢ëÁä∂ÊÄÅ...");var e=document.querySelector("video");if(!e)return void console.log("‚ùå Êú™ÊâæÂà∞ video ÂÖÉÁ¥†");console.log("üé• ËßÜÈ¢ëÁä∂ÊÄÅ: ".concat(e.readyState)),a();var t=setInterval(function(){console.log("üîÑ ÂÆöÊó∂Ê£ÄÊü•ËßÜÈ¢ëÁä∂ÊÄÅ:".concat(e.readyState,"..."));var o=function(e){if(!e)return!1;var t=document.querySelector(".chapter-list .tabs-cont-item .section-arrow .chapter-list-box.focus");if(!t)return!1;var o=u(t);if(!o)return!1;if(console.log("ÂΩìÂâçÁ´†ËäÇÁä∂ÊÄÅ: ".concat(o.status)),"Â∑≤ÂÆåÊàê"===o.status)return console.log("ÂΩìÂâçÁ´†ËäÇÂ∑≤ÂÆåÊàêÔºåËßÜÈ¢ëÊó†ÈúÄÂÜçÊí≠Êîæ"),!0;return 4===e.readyState&&e.currentTime>=e.duration}(document.querySelector("video"));o?(clearInterval(t),console.log("üéâ ËßÜÈ¢ëÂ∑≤ÂÆåÊàêÊí≠Êîæ"),"true"===e.dataset.simulateClick&&(console.log(" Â∑≤ÁªèÊ®°ÊãüÁÇπÂáª‰∫ÜËßÜÈ¢ë"),location.reload())):(console.log("ÂΩìÂâçÁ´†ËäÇÊú™ÂÆåÊàêÔºåÁªßÁª≠Êí≠ÊîæËßÜÈ¢ë"),a())},5e3);!function(e,t){if(e.dataset.listenerAdded)return;e.addEventListener("ended",function(){console.log("üé• ËßÜÈ¢ëÊí≠ÊîæÁªìÊùü"),t()}),e.dataset.listenerAdded="true"}(e,function(){setTimeout(function(){console.log("üîÑ Âà∑Êñ∞È°µÈù¢‰ª•Âä†ËΩΩ‰∏ã‰∏Ä‰∏™ËßÜÈ¢ë"),location.reload()},1e3)})}()},5e3)},5e3),{v:void 0}):void 0):(console.log("‚ö†Ô∏è Á´†ËäÇ ".concat(n+1," Áä∂ÊÄÅÂºÇÂ∏∏ÔºåÂà∑Êñ∞È°µÈù¢")),location.reload(),{v:void 0})};for(n.s();!(o=n.n()).done;)if(r=c())return r.v}catch(e){n.e(e)}finally{n.f()}if(Array.from(e).every(function(e){var t=u(e);return t&&"Â≠¶‰π†‰∏≠"!==t.status&&"Êú™ÂºÄÂßã"!==t.status})){console.log("üéâ ÂÖ®ÈÉ®Â≠¶‰π†ÂÆåÊàêÔºÅ");var s=sessionStorage.getItem("courseDetailPage");s?(console.log("üîó Ë∑≥ËΩ¨Âà∞ËØæÁ®ãËØ¶ÊÉÖÈ°µ:",s),setTimeout(function(){return window.location.href=s},1e3)):console.log("‚ùå Êú™ÊâæÂà∞ËØæÁ®ãËØ¶ÊÉÖÈ°µÈìæÊé•")}}else{console.log("‚ùå Êú™ÊâæÂà∞ chapter-list-box ÂÖÉÁ¥†");var f=setTimeout(function(){console.log("üîÑ ÈáçÊñ∞Â∞ùËØïÊ£ÄÊµãÁ´†ËäÇÂàóË°®..."),l(),clearTimeout(f)},5e3)}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=document.querySelector("video");if(o.readyState<4){var n=document.querySelector(".vjs-netslow .slow-img");if(n)return console.log("üé• Â¶ÇÊûúÊúâÈáçÊñ∞Âä†ËΩΩÊåâÈíÆÔºåÈÇ£‰πàÁÇπÂáª"),null==n||n.click(),!1}return console.log("üé• ËßÜÈ¢ëÂ∑≤ÂáÜÂ§áÂ•ΩÊí≠Êîæ",o.paused,o.playbackRate),o.muted=t,o.playbackRate=e,o.play(),!0}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div.viewport#content";console.log("üîç Ê£ÄÊü•viewportÂÜÖÂÆπ...");var t=document.querySelector(e);if(!t)return console.log("‚ùå Êú™ÊâæÂà∞ ".concat(e," ÁöÑdivÂÖÉÁ¥†")),setTimeout(function(){console.log("üîÑ Âà∑Êñ∞È°µÈù¢"),location.reload()},1e3),!0;var o=t.children.length>0;return console.log("üìä viewportÁä∂ÊÄÅ: Â≠êÂÖÉÁ¥†Êï∞Èáè=".concat(t.children.length)),o?(console.log("‚úÖ viewportÊúâÂÜÖÂÆπÔºåÊó†ÈúÄÂà∑Êñ∞"),!1):(console.log("‚ö†Ô∏è viewportÂÜÖÂÆπ‰∏∫Á©∫ÔºåÂáÜÂ§áÂà∑Êñ∞È°µÈù¢..."),setTimeout(function(){console.log("üîÑ Âà∑Êñ∞È°µÈù¢"),location.reload()},1e3),!0)}(function(){return o.apply(this,arguments)})().catch(console.error)}()})()})();